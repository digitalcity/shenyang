<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
<body>
  <div id="box">数据没来</div>
  <button id='btn'>获取数据</button>
  <script src="http://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
  <script>
    // var obg = {name: 'newming',age: 23, hobby: ['aaaa','dddd'],};
    // var arr = [
    //   {name:'123',age:12,},
    //   {name:'123',age:12,},
    // ]
    // // 将js对象转json格式
    // var jsonObg = JSON.stringify(arr);
    // console.log(jsonObg);

    // var jsonStr = '[{"name":"123","age":12},{"name":"123","age":12}]';
    // var obj = JSON.parse(jsonStr);
    // console.log(obj);

    // document.getElementById('btn').onclick = function () {
    //   // ajax 1
    //   var xmlhttp =new XMLHttpRequest();
    //
    //   xmlhttp.onreadystatechange=function(){
    //     if (xmlhttp.readyState==4 && xmlhttp.status==200){
    //       // console.log(typeof xmlhttp.responseText);
    //       var obj = JSON.parse(xmlhttp.responseText)
    //       // console.log(obj);
    //       let dataArr = obj.data;
    //       // console.log(dataArr);
    //       let str = ''
    //       for (var i = 0; i < dataArr.length; i++) {
    //         str += '<h1>' + dataArr[i].title + '</h1>'
    //       }
    //       // console.log(str);
    //       document.querySelector('#box').innerHTML = str
    //     }
    //   }
    //
    //   xmlhttp.open("GET","https://cnodejs.org/api/v1/topics",true);
    //   xmlhttp.send();
    // }

    // jquery
    $('#btn').click(function () {
      $.ajax({
        url: 'https://cnodejs.org/api/v1/topics',
        success: function (res) {
          console.log(res);
          var dataArr = res.data;
          var str = ''
          for (var i = 0; i < dataArr.length; i++) {
            str += `<div><h1><a href='https://cnodejs.org/topic/${dataArr[i].id}'>${dataArr[i].title}</a></h1><p>${dataArr[i].author.loginname}</p></div>`
          }
          $('#box').html(str);
        }
      })
    })
  </script>

</body>
</html>
